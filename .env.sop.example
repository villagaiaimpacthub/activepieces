# ActivePieces SOP Tool - Environment Configuration
# Copy this file to .env and update the values as needed

# Basic ActivePieces Configuration
AP_ENGINE_EXECUTABLE_PATH=dist/packages/engine/main.js
AP_ENVIRONMENT=prod
AP_FRONTEND_URL=http://localhost:8080
AP_WEBHOOK_TIMEOUT_SECONDS=30
AP_TRIGGER_DEFAULT_POLL_INTERVAL=5
AP_FLOW_TIMEOUT_SECONDS=600
AP_EXECUTION_MODE=UNSANDBOXED
AP_TELEMETRY_ENABLED=true
AP_TEMPLATES_SOURCE_URL="https://cloud.activepieces.com/api/v1/flow-templates"

# Security Configuration (Generate using tools/deploy.sh)
AP_API_KEY=your_random_api_key_here
AP_ENCRYPTION_KEY=your_32_character_hex_encryption_key_here
AP_JWT_SECRET=your_jwt_secret_here

# Database Configuration
AP_POSTGRES_DATABASE=activepieces_sop
AP_POSTGRES_HOST=localhost
AP_POSTGRES_PORT=5432
AP_POSTGRES_USERNAME=postgres
AP_POSTGRES_PASSWORD=your_postgres_password
AP_POSTGRES_SSL=false

# Redis Configuration
AP_REDIS_HOST=localhost
AP_REDIS_PORT=6379
AP_REDIS_PASSWORD=
AP_REDIS_DATABASE=0

# SOP-Specific Configuration
# Template Storage and Cache
SOP_TEMPLATE_CACHE_TTL=3600
SOP_TEMPLATE_SEARCH_TIMEOUT=5000
SOP_MAX_TEMPLATE_SIZE=10485760

# File Upload Configuration
SOP_MAX_FILE_SIZE=52428800
SOP_ALLOWED_FILE_TYPES=pdf,doc,docx,txt,md,png,jpg,jpeg,gif,csv,xlsx
SOP_UPLOAD_PATH=uploads/sop

# Export Configuration
SOP_EXPORT_TIMEOUT=30000
SOP_PDF_GENERATION_TIMEOUT=15000
SOP_EXPORT_CACHE_TTL=1800

# Email Configuration (for notifications)
SOP_SMTP_HOST=
SOP_SMTP_PORT=587
SOP_SMTP_USER=
SOP_SMTP_PASSWORD=
SOP_SMTP_FROM=noreply@company.com
SOP_SMTP_SECURE=false

# Audit and Logging
SOP_AUDIT_LOG_RETENTION_DAYS=90
SOP_LOG_LEVEL=info
SOP_AUDIT_LOG_ENABLED=true

# Rate Limiting
SOP_RATE_LIMIT_WINDOW_MS=900000
SOP_RATE_LIMIT_MAX_REQUESTS=100
SOP_RATE_LIMIT_SKIP_FAILED_REQUESTS=true

# Feature Flags
SOP_ENABLE_TEMPLATE_SHARING=true
SOP_ENABLE_ADVANCED_SEARCH=true
SOP_ENABLE_BULK_OPERATIONS=true
SOP_ENABLE_APPROVAL_WORKFLOWS=true
SOP_ENABLE_RECURRING_SOPS=true

# Integration Configuration
SOP_WEBHOOK_SECRET=your_webhook_secret
SOP_API_TIMEOUT=10000
SOP_RETRY_ATTEMPTS=3
SOP_RETRY_DELAY=1000

# Performance Configuration
SOP_SEARCH_INDEX_BATCH_SIZE=100
SOP_CONCURRENT_EXECUTIONS_LIMIT=50
SOP_TEMPLATE_PRELOAD_COUNT=20

# Security Headers
SOP_ENABLE_HELMET=true
SOP_CORS_ORIGINS=http://localhost:3000,http://localhost:8080
SOP_ENABLE_RATE_LIMITING=true

# Monitoring and Metrics
SOP_ENABLE_METRICS=true
SOP_METRICS_PORT=9090
SOP_HEALTH_CHECK_TIMEOUT=5000

# Development Configuration (dev/staging only)
NODE_ENV=production
DEBUG=false
SOP_ENABLE_DEBUG_ROUTES=false
SOP_MOCK_EXTERNAL_APIS=false

# Backup Configuration
SOP_BACKUP_ENABLED=true
SOP_BACKUP_SCHEDULE="0 2 * * *"
SOP_BACKUP_RETENTION_DAYS=30
SOP_BACKUP_PATH=./backups/sop

# Cloud Storage (Optional - for file attachments)
SOP_STORAGE_PROVIDER=local
SOP_AWS_S3_BUCKET=
SOP_AWS_S3_REGION=
SOP_AWS_ACCESS_KEY_ID=
SOP_AWS_SECRET_ACCESS_KEY=

# Analytics (Optional)
SOP_ANALYTICS_ENABLED=true
SOP_ANALYTICS_PROVIDER=internal
SOP_ANALYTICS_RETENTION_DAYS=365

# Third-party Integrations (Optional)
SOP_SLACK_BOT_TOKEN=
SOP_SLACK_SIGNING_SECRET=
SOP_TEAMS_WEBHOOK_URL=
SOP_JIRA_BASE_URL=
SOP_JIRA_USERNAME=
SOP_JIRA_API_TOKEN=

# License Information
SOP_LICENSE_KEY=
SOP_ORGANIZATION_NAME=Your Organization
SOP_MAX_USERS=unlimited
SOP_MAX_TEMPLATES=unlimited
SOP_MAX_EXECUTIONS_PER_MONTH=unlimited